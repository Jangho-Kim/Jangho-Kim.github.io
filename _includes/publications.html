<!-- Publications with Categories -->
{% if site.locale and site.locale != "" and site.locale != nil %}
<section class="bg-light page-section" id="{{ site.data.sitetext[site.locale].publications.section | default: "publications" }}">
  <div class="container">
    <div class="row">
      <div class="col-lg-12 text-center">
        <h2 class="section-heading text-uppercase">{{ site.data.sitetext[site.locale].publications.title }}</h2>
        <h3 class="section-subheading text-muted">{{ site.data.sitetext[site.locale].publications.text }}</h3>
      </div>
    </div>
    
    <!-- Publications Nav Tabs -->
    <div class="row">
      <div class="col-lg-12">
        <ul class="nav nav-tabs publication-tabs" id="publicationTabs" role="tablist">
          <li class="nav-item">
            <a class="nav-link active" id="conferences-tab" data-toggle="tab" href="#conferences" role="tab" aria-controls="conferences" aria-selected="true">International Conferences and Workshops</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" id="journals-tab" data-toggle="tab" href="#journals" role="tab" aria-controls="journals" aria-selected="false">International Journals</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" id="challenges-tab" data-toggle="tab" href="#challenges" role="tab" aria-controls="challenges" aria-selected="false">Challenges</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" id="underreview-tab" data-toggle="tab" href="#underreview" role="tab" aria-controls="underreview" aria-selected="false">Under Review</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" id="archives-tab" data-toggle="tab" href="#archives" role="tab" aria-controls="archives" aria-selected="false">Open Archive and Tech Reports</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" id="patents-tab" data-toggle="tab" href="#patents" role="tab" aria-controls="patents" aria-selected="false">Patents</a>
          </li>
        </ul>
      </div>
    </div>
    
    <!-- Publications Tab Content -->
    <div class="row">
      <div class="col-lg-12">
        <div class="tab-content" id="publicationTabContent">
          <!-- Conferences Tab -->
          <div class="tab-pane fade show active" id="conferences" role="tabpanel" aria-labelledby="conferences-tab">
            {% assign current_year = "" %}
            {% for paper in site.data.sitetext[site.locale].publications.conferences %}
              {% if paper.year != current_year %}
                {% assign current_year = paper.year %}
                <h3 class="publication-year-header">{{ current_year }}</h3>
              {% endif %}
              <div class="publication-item">
                <h4 class="publication-title">
                  {% if paper.link %}<a href="{{ paper.link }}" target="_blank">{{ paper.title }}</a>{% else %}{{ paper.title }}{% endif %}
                </h4>
                <p class="publication-authors">{{ paper.authors }}</p>
                <p class="publication-venue text-muted"><em>{{ paper.venue }}</em></p>
                {% if paper.awards %}<p class="publication-awards"><strong>{{ paper.awards }}</strong></p>{% endif %}
              </div>
            {% endfor %}
          </div>
          
          <!-- Journals Tab -->
          <div class="tab-pane fade" id="journals" role="tabpanel" aria-labelledby="journals-tab">
            {% assign current_year = "" %}
            {% for paper in site.data.sitetext[site.locale].publications.journals %}
              {% if paper.year != current_year %}
                {% assign current_year = paper.year %}
                <h3 class="publication-year-header">{{ current_year }}</h3>
              {% endif %}
              <div class="publication-item">
                <h4 class="publication-title">
                  {% if paper.link %}<a href="{{ paper.link }}" target="_blank">{{ paper.title }}</a>{% else %}{{ paper.title }}{% endif %}
                </h4>
                <p class="publication-authors">{{ paper.authors }}</p>
                <p class="publication-venue text-muted"><em>{{ paper.venue }}</em></p>
                {% if paper.impact_factor %}<p class="publication-impact">Impact Factor: {{ paper.impact_factor }}</p>{% endif %}
              </div>
            {% endfor %}
          </div>
          
          <!-- Challenges Tab -->
          <div class="tab-pane fade" id="challenges" role="tabpanel" aria-labelledby="challenges-tab">
            <ul class="publications-list">
            {% for item in site.data.sitetext[site.locale].publications.challenges %}
              <li class="publication-item">
                <h4 class="publication-title">
                  {% if item.link %}<a href="{{ item.link }}" target="_blank">{{ item.title }}</a>{% else %}{{ item.title }}{% endif %}
                </h4>
                <p class="publication-authors">{{ item.team }}</p>
                <p class="publication-venue text-muted"><em>{{ item.venue }}</em></p>
                {% if item.rank %}<p class="publication-rank"><strong>Rank: {{ item.rank }}</strong></p>{% endif %}
              </li>
            {% endfor %}
            </ul>
          </div>

          <!-- Under Review Tab -->
          <div class="tab-pane fade" id="underreview" role="tabpanel" aria-labelledby="underreview-tab">
            {% for paper in site.data.sitetext[site.locale].publications.under_review %}
              <div class="publication-item">
                <h4 class="publication-title">{{ paper.title }}</h4>
                <p class="publication-authors">{{ paper.authors }}</p>
                <p class="publication-venue text-muted"><em>{{ paper.venue }}</em></p>
              </div>
            {% endfor %}
          </div>

          <!-- Archives Tab -->
          <div class="tab-pane fade" id="archives" role="tabpanel" aria-labelledby="archives-tab">
            {% assign current_year = "" %}
            {% for paper in site.data.sitetext[site.locale].publications.archives %}
              {% if paper.year != current_year %}
                {% assign current_year = paper.year %}
                <h3 class="publication-year-header">{{ current_year }}</h3>
              {% endif %}
              <div class="publication-item">
                <h4 class="publication-title">
                  {% if paper.link %}<a href="{{ paper.link }}" target="_blank">{{ paper.title }}</a>{% else %}{{ paper.title }}{% endif %}
                </h4>
                <p class="publication-authors">{{ paper.authors }}</p>
                <p class="publication-venue text-muted"><em>{{ paper.venue }}</em></p>
              </div>
            {% endfor %}
          </div>
          
          <!-- Patents Tab -->
          <div class="tab-pane fade" id="patents" role="tabpanel" aria-labelledby="patents-tab">
            <ul class="publications-list">
            {% for patent in site.data.sitetext[site.locale].publications.patents %}
              <li class="publication-item">
                <h4 class="publication-title">
                  {% if patent.link %}<a href="{{ patent.link }}" target="_blank">{{ patent.title }}</a>{% else %}{{ patent.title }}{% endif %}
                </h4>
                <p class="publication-authors">{{ patent.inventors }}</p>
                <p class="publication-venue text-muted">
                  <em>Patent {{ patent.number }}{% if patent.status %} ({{ patent.status }}){% endif %}</em>
                </p>
                {% if patent.date %}<p class="publication-date">Filed: {{ patent.date }}</p>{% endif %}
              </li>
            {% endfor %}
            </ul>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>
{% else %}
<!-- 기본 버전 (locale이 없는 경우) - 유사한 구조로 동일하게 구현 -->
{% endif %}
<!-- End Publications -->